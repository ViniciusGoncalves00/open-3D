<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Three.js + TypeScript</title>
  <style>
    html, body {
       margin: 0;
       height: 100%;
    }
    #c {
       width: 100%;
       height: 100%;
       display: block;
    }
    </style>
    <script type="module" src="./dist/bundle.js"></script>
</head>
<body>
  <div class="bg-gray-300 w-full h-screen flex flex-col">
    <div id="time-controls" x-data="{ isRunning: false, isPaused: false }" class="w-full h-8 flex items-center justify-center">
      <button id="stop" 
        @click="UISimulationHandler.stop(); isRunning = false; isPaused = false" 
        :disabled="!(isRunning || isPaused)" 
        class="h-full aspect-square bg-gray-200 border border-gray-400 flex items-center justify-center">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-stop" viewBox="0 0 16 16">
            <path d="M3.5 5A1.5 1.5 0 0 1 5 3.5h6A1.5 1.5 0 0 1 12.5 5v6a1.5 1.5 0 0 1-1.5 1.5H5A1.5 1.5 0 0 1 3.5 11zM5 4.5a.5.5 0 0 0-.5.5v6a.5.5 0 0 0 .5.5h6a.5.5 0 0 0 .5-.5V5a.5.5 0 0 0-.5-.5z"/>
        </svg>
      </button>
      <button id="pause" 
          @click="UISimulationHandler.pause(); isRunning = false; isPaused = true" 
          x-show="isRunning"
          class="h-full aspect-square bg-gray-200 border border-gray-400 flex items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-pause" viewBox="0 0 16 16">
              <path d="M6 3.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V4a.5.5 0 0 1 .5-.5m4 0a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V4a.5.5 0 0 1 .5-.5"/>
          </svg>
      </button>
      <button id="play" 
          @click="if (isPaused) { UISimulationHandler.unpause(); isRunning = true; isPaused = false } else { UISimulationHandler.Start(); isRunning = true; isPaused = false }"
          class="h-full aspect-square bg-gray-200 border border-gray-400 flex items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-play" viewBox="0 0 16 16">
              <path d="M10.804 8 5 4.633v6.734zm.792-.696a.802.802 0 0 1 0 1.392l-6.363 3.692C4.713 12.69 4 12.345 4 11.692V4.308c0-.653.713-.998 1.233-.696z"/>
          </svg>
      </button>
    </div>
    <div id="tabs" class="w-full h-8 flex items-center justify-center">
      <button id="editor-tab" class="w-16 h-full bg-gray-200 border border-gray-400 flex items-center justify-center">
        editor
      </button>
      <button id="run-tab" class="w-16 h-full bg-gray-200 border border-gray-400 flex items-center justify-center">
        run
      </button>
    </div>
    <div id="viewport-container" class="w-full h-full flex space-x-1">
      <div id="viewport-editor" class="w-full h-full"></div>
      <div id="viewport-run" class="w-full h-full"></div>
    </div>
  </div>
</body>
</html>



<script type="module">
  // Exemplo básico de controlador de modo
class ViewModeController {
  constructor() {
    this.mode = 'editor';
    this.listeners = [];
  }

  getMode() {
    return this.mode;
  }

  setMode(newMode) {
    this.mode = newMode;
    this.listeners.forEach(cb => cb(this.mode));
  }

  onChange(cb) {
    this.listeners.push(cb);
  }
}

const controller = new ViewModeController();

function updateViewports(mode) {
  const editor = document.getElementById("viewport-editor");
  const run = document.getElementById("viewport-run");
}

// Inicializa visualização
controller.onChange(updateViewports);
updateViewports(controller.getMode());

// Eventos dos botões
document.getElementById("editor-tab").addEventListener("click", () => {
  controller.setMode("editor");
});

document.getElementById("run-tab").addEventListener("click", () => {
  console.log("click");
  controller.setMode("run");
});

</script>

